{%- if predictive_search.performed -%}
  {% assign first_column_results_size = predictive_search.resources.queries.size | plus: predictive_search.resources.collections.size| plus: predictive_search.resources.pages.size | plus: predictive_search.resources.articles.size
  %}
  <div id="predictive-search-results" role="listbox" class="d-flex f-wrap f-colum r-gap c-gap" style="--r-gap: 1.5rem; --c-gap: 1.5rem;">
    {%- if predictive_search.resources.queries.size > 0 or predictive_search.resources.collections.size > 0 -%}
      <div class="predictive-search__result-group d-block w-100">
        <h2 id="predictive-search-queries" class="predictive-search__heading b-bottom uppercase subrte">
          {{- 'templates.search.suggestions' | t -}}
        </h2>
        <ul id="predictive-search-results-queries-list" class="predictive-search__results-list d-flex f-wrap list-unstyled r-gap c-gap" role="group" aria-labelledby="predictive-search-queries" style="--r-gap: 1.5rem; --c-gap: 1.5rem;">
          {%- for query in predictive_search.resources.queries -%}
            <li id="predictive-search-option-query-{{ forloop.index }}" class="predictive-search__list-item" role="option" aria-selected="false">
              <a href="{{ query.url }}" class="predictive-search__item link link--style-line u-none color-foreground border d-block" tabindex="-1">
                <div class="predictive-search__item-content">
                  <p class="predictive-search__item-heading subrte link-style m-0 color-light predictive-search__item-query-result" aria-label="{{ query.text }}">{{ query.styled_text }}</p>
                </div>
              </a>
            </li>
          {%- endfor -%}
          {%- for collection in predictive_search.resources.collections -%}
            <li id="predictive-search-option-collection-{{ forloop.index }}" class="predictive-search__list-item" role="option" aria-selected="false">
              <a href="{{ collection.url }}" class="predictive-search__item link link--style-line u-none color-foreground border d-block" tabindex="-1">
                <div class="predictive-search__item-content">
                  <p class="predictive-search__item-heading subrte link-style m-0 color-light">{{ collection.title }}</p>
                </div>
              </a>
            </li>
          {%- endfor -%}
        </ul>
      </div>
    {%- endif -%}
    {%- if predictive_search.resources.products.size > 0 -%}
      <div class="predictive-search__result-group d-block w-100">
        <h2 id="predictive-search-products" class="predictive-search__heading b-bottom uppercase subrte">
          {{- 'templates.search.products' | t -}}
        </h2>
        <ul id="predictive-search-results-products-list" class="predictive-search__results-list list-unstyled" role="group" aria-labelledby="predictive-search-products">
          {%- for product in predictive_search.resources.products -%}
            <li id="predictive-search-option-product-{{ forloop.index }}" class="predictive-search__list-item{% unless forloop.first %} b-top{% endunless %}" role="option" aria-selected="false">
              <a href="{{ product.url }}" class="predictive-search__item predictive-search__item--link d-block link link--style-line u-none color-foreground d-grid w-100 left" tabindex="-1">
                {%- if product.featured_media != blank -%}
                  <img class="predictive-search__image" src="{{ product.featured_media | image_url: width: 150 }}" alt="{{ product.featured_media.alt }}" width="100" height="{{ 100 | divided_by: product.featured_media.preview_image.aspect_ratio }}">
                {%- endif -%}
                <div class="predictive-search__item-content">
                  {%- if settings.predictive_search_show_vendor -%}
                    <span class="visually-hidden">{{ 'accessibility.vendor' | t }}</span>
                    <div class="predictive-search__item-vendor caption-with-letter-spacing uppercase">{{ product.vendor }}</div>
                  {%- endif -%}
                  <p class="predictive-search__item-heading subrte m-0 color-light">
                    <span class="link-style">{{ product.title }}</span>
                  </p>
                  {%- if settings.predictive_search_show_price -%}
                    {% render 'price', product: product, use_variant: true, main_price: true %}
                  {%- endif -%}
                </div>
              </a>
            </li>
          {%- endfor -%}
        </ul>
      </div>
    {%- endif -%}
    {%- if predictive_search.resources.articles.size > 0 or predictive_search.resources.pages.size > 0 -%}
      <div class="predictive-search__result-group d-block w-100">
        <h2 id="predictive-search-pages" class="predictive-search__heading b-bottom uppercase subrte">
          {{- 'templates.search.pages' | t -}}
        </h2>
        <ul id="predictive-search-results-pages-list" class="predictive-search__results-list d-flex f-wrap list-unstyled r-gap c-gap" role="group" aria-labelledby="predictive-search-pages" style="--r-gap: 1.5rem; --c-gap: 1.5rem;">
          {%- for page in predictive_search.resources.pages -%}
            <li id="predictive-search-option-page-{{ forloop.index }}" class="predictive-search__list-item" role="option" aria-selected="false">
              <a href="{{ page.url }}" class="predictive-search__item d-block link link--style-line u-none color-foreground border" tabindex="-1">
                <div class="predictive-search__item-content">
                  <p class="predictive-search__item-heading subrte link-style m-0 color-light">{{ page.title }}</p>
                </div>
              </a>
            </li>
          {%- endfor -%}
          {%- for article in predictive_search.resources.articles -%}
            <li id="predictive-search-option-article-{{ forloop.index }}" class="predictive-search__list-item" role="option" aria-selected="false">
              <a href="{{ article.url }}" class="predictive-search__item link link--style-line u-none d-block color-foreground border" tabindex="-1">
                <div class="predictive-search__item-content">
                  <p class="predictive-search__item-heading subrte link-style m-0 color-light">{{ article.title }}</p>
                </div>
              </a>
            </li>
          {%- endfor -%}
        </ul>
      </div>
    {%- endif -%}
    {%- unless predictive_search.resources.products.size > 0 or predictive_search.resources.queries.size > 0 or predictive_search.resources.collections.size > 0 or predictive_search.resources.articles.size > 0 or predictive_search.resources.pages.size > 0 -%}
      <div class="predictive-search__result-group d-block w-100">
        <div id="predictive-search-no-results-found" class="predictive-search__no-results-found center m-auto">
          <h2 id="predictive-search-no-results-heading" class="predictive-search__title typography-font-heading m-spacing" style="--m-spacing-t: 1rem; --m-spacing-b: 1rem;">
            {{- 'templates.search.search_product_for' | t: terms: predictive_search.terms -}}
          </h2>
          <p id="predictive-search-no-results-content" class="predictive-search__content typography-font-body m-spacing">
            {{- 'templates.search.search_product_check' | t -}}
          </p>
        </div>
      </div>
    {%- endunless -%}
    <div class="predictive-search__result-group d-block w-100">
      <div class="predictive-search__loading-state" aria-hidden="true">
        {% render 'icon-spinner' %}
      </div>
      <div id="predictive-search-option-search-keywords" class="predictive-search__search-for-button">
        <button class="predictive-search__item predictive-search__item--term t-button c-pointer b-none link u-none color-foreground animate-arrow j-c-between a-i-center d-flex w-100 l-h-1 subrte" tabindex="-1" role="option" aria-selected="false">
          <span data-predictive-search-search-for-text>{{ 'templates.search.search_for' | t: terms: predictive_search.terms }}</span>
          {% render 'icon-arrow' %}
        </button>
      </div>
    </div>
  </div>
  <span class="hidden" data-predictive-search-live-region-count-value>
    {% liquid
      assign total_results = predictive_search.resources.products.size | plus: first_column_results_size
      if total_results == 0
        echo 'templates.search.no_results' | t: terms: predictive_search.terms
      else
        echo 'templates.search.results_with_count' | t: count: total_results | append: ': '
        if predictive_search.resources.queries.size > 0
          assign count = predictive_search.resources.queries.size | plus: predictive_search.resources.collections.size
          echo 'templates.search.results_suggestions_with_count' | t: count: count | append: ', '
        endif
        if predictive_search.resources.pages.size > 0
          assign count = predictive_search.resources.pages.size | plus: predictive_search.resources.articles.size
          echo 'templates.search.results_pages_with_count' | t: count: count | append: ', '
        endif
        if predictive_search.resources.products.size > 0
          echo 'templates.search.results_products_with_count' | t: count: predictive_search.resources.products.size
        endif
      endif
    %}
  </span>
{%- endif -%}
