<div class="gradient">
  <div class="password-header page-width m-auto d-flex f-column j-c-between a-i-center color-foreground center-xs" style="--m-w: {{ section.settings.logo_max_width }}px;">
    {%- if section.settings.logo != blank -%}
      {%- assign logo_alt = section.settings.logo.alt | default: shop.name | escape -%}
      {%- assign logo_height = section.settings.logo_max_width | divided_by: section.settings.logo.aspect_ratio -%}
      {{ section.settings.logo | image_url: width: section.settings.logo.width | image_tag:
        class: 'password-logo m-w w-100',
        widths: '50, 100, 150, 200, 250, 300, 400, 500',
        width: section.settings.logo_max_width,
        height: logo_height,
        alt: logo_alt
      }}
    {%- else -%}
      <h1 class="h2 break m-0 color-light">{{ shop.name }}</h1>
    {%- endif -%}
    {%- if shop.password_message != blank -%}
      <div class="password-content center">
        {{ shop.password_message }}
      </div>
    {%- endif -%}
    <password-modal>
      <details class="password-modal modal">
        <summary class="modal__toggle c-pointer pos-relative" aria-haspopup="dialog">
          <div class="modal__toggle-open password-link link link--text u-link a-i-center w-s-nowrap">
            {% render 'icon-padlock' %}
            {{ 'general.password_page.login_password_button' | t }}
          </div>
          <div class="modal__toggle-close b-circle c-pointer button--close" aria-hidden="true">
            <span class="i__close e-none d-block pos-relative color-current w-100 h-100"></span>
          </div>
        </summary>
        <div class="modal__content pos-absolute top-0 left-0 bottom-0 w-100 d-flex a-i-center j-c-center z-index-4 gradient gradient-global" role="dialog" aria-labelledby="DialogHeading" aria-modal="true">
          <div class="password-modal__content d-flex f-column j-c-center a-i-center center w-100 h-100" tabindex="-1">
            <button type="button" class="modal__close-button t-button c-pointer d-block b-none b-circle pos-absolute button--close no-js-hidden" aria-label="{{ 'accessibility.close' | t }}"><span class="i__close e-none d-block pos-relative color-current w-100 h-100"></span></button>
            <h2 class="password-modal__content-heading" id="DialogHeading">{{ 'general.password_page.login_form_heading' | t }}</h2>
            {%- form 'storefront_password', class: 'password-form d-flex f-wrap a-i-center j-c-center w-100' -%}
              <div class="password-field field field-bg f-a-none d-flex f-wrap pos-relative w-100{% if form.errors %} field--error{% endif %}">
                <input
                  type="password"
                  name="password"
                  id="Password"
                  class="field__input field__input--bg f-grow left"
                  autocomplete="current-password"
                  {% if form.errors %}
                    aria-invalid="true"
                    aria-describedby="PasswordLoginForm-password-error"
                  {%- endif -%}
                  placeholder="{{ 'general.password_page.login_form_password_placeholder' | t }}"
                >
                <label class="field__label field__label--fixed pos-absolute e-none subrte" for="{{ 'general.password_page.login_form_password_label' | t }}">{{ 'general.password_page.login_form_password_placeholder' | t }}</label>
                <button name="commit" class="password-button button button--constant button--transparent pos-absolute top-0 right-0 d-flex b-none f-b-none">
                  {% render 'icon-arrow' %}
                </button>
                {%- if form.errors -%}
                  <div id="PasswordLoginForm-password-error" role="status">
                    <span class="visually-hidden">{{ 'accessibility.error' | t }}</span>
                    <span class="form__message d-flex a-i-center subrte">{% render 'icon-error' %} {{ 'general.password_page.login_form_error' | t }}</span>
                  </div>
                {%- endif -%}
              </div>
            {%- endform -%}
            <small class="password__footer-text">{{ 'general.password_page.admin_link_html' | t }}</small>
          </div>
        </div>
      </details>
    </password-modal>
  </div>
</div>
{% schema %}
{
  "name": "t:sections.main-password-header.name",
  "settings": [
  {
    "type": "image_picker",
    "id": "logo",
    "label": "t:sections.main-password-header.settings.logo.label"
  },
  {
    "type": "range",
    "id": "logo_max_width",
    "min": 50,
    "max": 250,
    "step": 10,
    "default": 100,
    "unit": "px",
    "label": "t:sections.main-password-header.settings.logo_max_width.label"
  }]
}
{% endschema %}
